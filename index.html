<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kaviyarasi E â€” Animated Portfolio (Ultra)</title>
  <meta name="description" content="World-class animated portfolio: typing hero, 3D project cards, elegant certifications timeline, and EmailJS contact." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #070a13;
      --panel: #0c1120;
      --text: #eaf0ff;
      --muted: #9fb0c7;
      --brand: #7c5cff;
      --brand-2: #00e0ff;
      --brand-3: #00ffa5;
      --success: #18c964;
      --danger: #ff5370;
      --card: #0c1224;
      --radius: 20px;
      --shadow: 0 24px 60px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%;scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;color:var(--text);background:var(--bg);overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* ===== Cosmic Background (Canvas + gradients) ===== */
    .bg-wrap{position:fixed;inset:0;z-index:-2;overflow:hidden}
    canvas#stars{position:absolute;inset:0;filter: drop-shadow(0 0 6px rgba(124,92,255,.4));}
    .aurora{position:absolute;inset:-20% -10% auto -10%;height:120vh;z-index:-1;opacity:.6;filter: blur(60px);
      background:
        radial-gradient(45% 60% at 20% 20%, rgba(124,92,255,.22), transparent 60%),
        radial-gradient(35% 40% at 80% 30%, rgba(0,224,255,.18), transparent 60%),
        radial-gradient(30% 30% at 60% 70%, rgba(0,255,165,.16), transparent 60%);
      animation: floatAurora 16s ease-in-out infinite alternate;
    }
    @keyframes floatAurora{from{transform:translateY(-2%) scale(1)} to{transform:translateY(2%) scale(1.06)}}

    /* ===== Sticky Top Nav ===== */
    header{position:sticky;top:0;z-index:50;background:rgba(7,10,19,.55);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{max-width:1180px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.2px}
    .brand-badge{width:40px;height:40px;border-radius:14px;background:conic-gradient(from 120deg, var(--brand), var(--brand-2), var(--brand-3), var(--brand));display:grid;place-items:center;box-shadow:var(--shadow)}
    .brand-badge span{font-family:"Space Grotesk",Inter,sans-serif;font-weight:800}
    nav ul{display:flex;gap:18px;list-style:none;padding:0;margin:0}
    nav a{padding:8px 12px;border-radius:12px;color:var(--muted);font-weight:700}
    nav a:hover,nav a:focus{color:var(--text);background:rgba(255,255,255,.06)}
    .cta{padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#071019;font-weight:800;box-shadow:var(--shadow)}

    /* ===== Layout ===== */
    section{padding:88px 20px}
    .container{max-width:1180px;margin:0 auto}

    /* ===== Hero ===== */
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:42px;align-items:center}
    .kicker{color:var(--brand-2);font-weight:800;letter-spacing:.18em;text-transform:uppercase;font-size:12px}
    h1{font-family:"Space Grotesk",Inter,sans-serif;font-size:clamp(36px,6.2vw,66px);line-height:1.06;margin:10px 0 12px}
    .lead{color:var(--muted);font-size:clamp(16px,2.4vw,18px)}

    .typing{display:inline-block;border-right:3px solid var(--brand-2);padding-right:6px;animation:caret 1s steps(1) infinite}
    @keyframes caret{50%{border-color:transparent}}
    @keyframes pulse { from { box-shadow: 0 0 10px rgba(124,92,255,.4); } to { box-shadow: 0 0 10px rgba(0,224,255,.8); } }
    .typing { font-family: 'Space Grotesk', sans-serif; font-size: 1.6rem; font-weight: bold; margin-top: 10px; color: var(--brand-2); min-height: 20px; }
    .cv-download {
  margin-top: 15px;
  text-align: center;  /* keeps it aligned with buttons */
}
    .cv-btn {
  display: inline-block;       /* not full width */
  padding: 10px 16px;           /* smaller size */
  font-size: 16px;             /* smaller text */
  border-radius: 10px;        
  background: linear-gradient(135deg, var(--brand), var(--brand-2));
  color: #121212fd;
  font-weight: 800;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.cv-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}

    section { padding: 40px 20px; }
    h2.section-title { text-align: center; font-size: 2rem; margin-bottom: 10px; opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
    h2.section-title.visible { opacity: 1; transform: translateY(0); }
    p.section-sub { text-align: center; color: var(--muted); margin-bottom: 12px; }

    .hero-card{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.07);border-radius:var(--radius);padding:26px;box-shadow:var(--shadow)}
    .metrics{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:20px}
    .metric{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px;text-align:center}
    .metric .n{font-weight:900;font-size:26px}
    .metric .l{color:var(--muted);font-size:12px}

    /* ===== Section Titles ===== */
    .section-title{font-family:"Space Grotesk",Inter,sans-serif;font-size:clamp(28px,4.4vw,40px);margin:0 0 10px}
    .section-sub{color:var(--muted);margin-bottom:28px}

    /* ===== Projects Grid (3D Tilt + spotlight) ===== */
    #projects {background: linear-gradient(180deg, #0b1326, #070a13);}
    .projects{display:grid;grid-template-columns:repeat(3,1fr);gap:22px}
    .card{position:relative;overflow:hidden;border-radius:18px;background:var(--card);border:1px solid rgba(255,255,255,.06);transform:translateY(0) scale(1);transition:transform .35s ease, box-shadow .35s ease;box-shadow:0 8px 20px rgba(0,0,0,.35);will-change:transform;perspective:900px}
    .card:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 28px 56px rgba(0,0,0,.5)}
    .thumb{aspect-ratio:16/10;display:grid;place-items:center;font-weight:800;font-size:24px;color:#cfe4ff;background:linear-gradient(135deg, rgba(124,92,255,.35), rgba(0,224,255,.25));transform-style:preserve-3d}
    .card-body{padding:16px 16px 20px}
    .chip{display:inline-flex;align-items:center;gap:8px;font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.08);color:var(--muted)}
    .hover-reveal{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .35s ease;background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%), rgba(124,92,255,.28), transparent 60%)}
    .card:hover .hover-reveal{opacity:1}

    /* ===== Certifications (Elegant timeline) ===== */
    #certs {background: linear-gradient(180deg, #070a13, #0b1326);}
    .cert-wrap{display:grid;grid-template-columns:.35fr .65fr;gap:26px;align-items:start}
    .cert-aside{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow)}
    .cert-list{position:relative;margin:0;padding:0;list-style:none}
    .cert-list::before{content:'';position:absolute;left:18px;top:0;bottom:0;width:3px;background:linear-gradient(var(--brand),var(--brand-2));border-radius:3px}
    .cert-item{position:relative;margin:0 0 22px 0;padding:14px 16px 14px 46px;background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:14px;opacity:0;transform:translateY(16px);transition:opacity .6s ease, transform .6s ease}
    .cert-item.visible{opacity:1;transform:translateY(0)}
    .cert-item::before{content:'';position:absolute;left:12px;top:16px;width:12px;height:12px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #ffd86b, #ff9f1a);box-shadow:0 0 12px rgba(255,216,107,.6)}
    .cert-item h4{margin:0 0 4px;color:#ffd86b}
    .cert-item p{margin:0;color:var(--muted)}

    /* ===== Contact ===== */
    #contact {background: linear-gradient(180deg, #0b1326, #070a13);}
    .contact{display:grid;grid-template-columns:1fr 1fr;gap:32px}
    form{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:22px;will-change:auto}
    label{display:block;font-weight:700;margin:10px 0 6px}
    input,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:#0b1326;color:var(--text);outline:none;transition:border-color .2s ease, box-shadow .2s ease}
    input:focus,textarea:focus{border-color:var(--brand-2);box-shadow:0 0 0 3px rgba(0,224,255,.18)}
    textarea{min-height:120px;resize:vertical}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:12px;border:none;font-weight:800;cursor:pointer;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#071019;box-shadow:var(--shadow);transform:translateZ(0)}
    .btn.magnetic{position:relative;overflow:hidden}
    .btn.magnetic::after{content:'';position:absolute;inset:0;background:radial-gradient(220px 120px at var(--bx,50%) var(--by,50%), rgba(255,255,255,.35), transparent 60%);opacity:0;transition:opacity .25s}
    .btn.magnetic:hover::after{opacity:1}

    .note{color:var(--muted);font-size:14px}
    .alert{margin-top:12px;padding:10px 12px;border-radius:12px;font-weight:700;display:none;min-height:44px}
    .alert.success{background:rgba(24,201,100,.15);border:1px solid rgba(24,201,100,.4);color:#b7f6d2}
    .alert.error{background:rgba(255,83,112,.15);border:1px solid rgba(255,83,112,.45);color:#ffd5dc}

    footer{padding:30px 20px;color:var(--muted);text-align:center;border-top:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02)}

    /* ===== Reveal on scroll ===== */
    .reveal{opacity:0;transform:translateY(12px);transition:opacity .7s ease, transform .7s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}
    /* ===== Responsive Fixes ===== */
@media (max-width: 1024px) {
  .hero {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .hero-card {
    margin-top: 20px;
  }
}

@media (max-width: 768px) {
  nav ul {
    display: none; /* hide normal nav */
  }
  .hamburger {
    display: block;
    cursor: pointer;
    font-size: 24px;
  }
  .projects {
    grid-template-columns: 1fr 1fr;
  }
}

@media (max-width: 480px) {
  h1 {
    font-size: clamp(28px, 8vw, 42px);
  }
  .projects {
    grid-template-columns: 1fr;
  }
  .btn, .cv-btn {
    font-size: clamp(12px, 4vw, 16px);
    padding: 10px 14px;
  }
  #micBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    font-size: 16px;
    padding: 12px 18px;
    z-index: 1000;
  }
}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){.card,.hover-reveal,.reveal{transition:none}.typing{animation:none;border-right:none}.aurora{animation:none}html,body{scroll-behavior:auto}}
  </style>
</head>
<body>
  <!-- Background effects -->
  <div class="bg-wrap" aria-hidden="true">
    <canvas id="stars"></canvas>
    <div class="aurora"></div>
  </div>

  <!-- NAV -->
  <header>
    <div class="nav" role="navigation" aria-label="Primary">
      <a class="brand" href="#home">
        <div class="brand-badge" aria-hidden="true"><span>KE</span></div>
        <span>Kaviyarasi E</span>
      </a>
      <nav>
        <ul>
          <li><a href="#home">Home</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#certs">Certifications</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
      <a class="cta" href="#contact">Hire Me</a>
    </div>
  </header>

  <main id="home">
    <!-- HERO -->
     <button id="micBtn" class="btn magnetic" style="margin-top:20px">
  ðŸŽ¤ Start Listening
</button>
    <section class="container">
      <div class="hero">
        <div>
          <div class="kicker">Hello, I'm</div>
          <h1>
            Kaviyarasi â€” <span class="typing" aria-live="polite"></span>
          </h1>
          <p class="lead">I build delightful, accessible web & mobile experiences powered by AI. I care about performance, usability, and craft.</p>
          <div style="margin-top:18px;display:flex;gap:12px;flex-wrap:wrap">
            <a class="btn magnetic" href="#projects" aria-label="See my projects">See Projects</a>
            <a class="btn magnetic" href="#contact" aria-label="Contact me" style="background:linear-gradient(135deg,var(--brand-2),var(--brand))">Let's Talk</a>
            <a href="Kaviyarasi_E_ATS.pdf" class="cv-btn" download>Download CV</a>
          </div>
          <div class="metrics" aria-label="Quick metrics">
          </div>
        </div>
        <aside class="hero-card" aria-label="About highlight">
          <h3 style="margin:0 0 10px;font-family:'Space Grotesk',Inter,sans-serif">What I do</h3>
          <p class="note">Full-stack development, AI integrations, mobile apps, and lightning-fast UIs. I love solving real problems with clean code and thoughtful design.</p>
          <ul style="margin:14px 0 0;padding-left:18px;color:var(--muted)">
            <li>React, Flutter, Node.js, Firebase</li>
            <li>AI assistants, voice interfaces</li>
            <li>Secure payments & deployment</li>
          </ul>
        </aside>
      </div>
    </section>
    <section class="hero">
    


    <!-- PROJECTS -->
    <section id="projects" class="container">
      <h2 class="section-title">Featured Projects</h2>
      <p class="section-sub">Hover to preview.</p>
      <div class="projects">
        <!-- AI Summarizer (GitHub allowed) -->
        <a class="card reveal tilt" href="#" target="_blank" rel="noopener" aria-label="Resume & Portfolio Builder">
          <div class="thumb">AI Voice based Summarizer</div>
          <div class="card-body">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:10px"><strong>Offline Text Summarizer</strong><span class="chip">WebSpeech API</span></div>
            <p class="note" style="margin:8px 0 0">One-click, Get short notes with Voice input.</p>
            <div style="display:flex;gap:10px;flex-wrap:wrap">
            <a href="https://kaviyarasi27.github.io/AI-Voice-based-summarizer/" target="_blank"
            class="chip" href="#" target="_blank" rel="noopener">Live Demo</a>
            <a href="https://github.com/Kaviyarasi27/AI-Voice-based-summarizer" target="_blank"
            class="chip" href="#" target="_blank" rel="noopener">GitHub</a>
            </div>
          </div>
          <span class="hover-reveal" aria-hidden="true"></span>
        </a>
        <!-- AI Sentiment analyzer ( GitHub allowed)-->
       <a class="card reveal tilt" href="#" target="_blank" rel="noopener" aria-label="Career Compass AI">
          <div class="thumb">Voice interactive Sentiment Analyzer</div>
          <div class="card-body">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:10px"><strong>Sentiment Analyzer</strong><span class="chip">Tailwind â€¢ Chart.js</span></div>
            <p class="note" style="margin:8px 0 0">Text + voice input/output, Multi-Language support, Confidence Scoring + Charts, History .</p>
            <div style="display:flex;gap:10px;flex-wrap:wrap">
              <a href="https://kaviyarasi27.github.io/Voice-Interactive-Sentiment-Analyzer/" target="_blank"
              class="chip" href="#" target="_blank" rel="noopener">Live Demo</a>
              <a href="https://github.com/Kaviyarasi27/Voice-Interactive-Sentiment-Analyzer" target="_blank"
              class="chip" href="#" target="_blank" rel="noopener">GitHub</a>
            </div>
          </div>
          <span class="hover-reveal" aria-hidden="true"></span>
        </a>
    </section>

    <!-- CERTIFICATIONS -->
    <section id="certs" class="container">
      <h2 class="section-title">Certifications</h2>
      <p class="section-sub">A curated selection â€” click to view or download your certificates.</p>
      <div class="cert-wrap">
        <aside class="cert-aside">
          <h3 style="margin:0 0 6px;font-family:'Space Grotesk',Inter,sans-serif">Highlights</h3>
          <p class="note">Industry-recognized credentials in AI, data, and design.</p>
          <ul style="margin:10px 0 0;padding-left:18px;color:var(--muted)">
            <li>Generative AI Virtual Internshipâ€” 2025</li>
            <li>Controllers Job Simulation â€” 2025</li>
            <li>UI/UX Design Job Simulation â€” 2025</li>
          </ul>
        </aside>
        <ul class="cert-list">
          <li class="cert-item reveal"><h4>Eduskill Virtual Internship</h4><p>Eduskill Â· 2025 â€” <a href="Eduskill virtual internship.pdf" download>Download</a></p></li>
          <li class="cert-item reveal"><h4>Goldman Sachs Job Simulation</h4><p>Forage Â· 2025 â€” <a href="Goldmann Sachs.pdf" download>Download</a></p></li>
          <li class="cert-item reveal"><h4>UI/UX Design Job Simulation</h4><p>Forage Â· 2025 â€” <a href="UX design.pdf" download>Download</a></p></li>
        </ul>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="container">
      <h2 class="section-title">Let's build something great</h2>
      <p class="section-sub">Send a message â€” I'll reply within 24 hours.</p>
      <div class="contact">
        <form id="contactForm" novalidate aria-describedby="formHelp">
          <div class="alert" id="formAlert" role="alert"></div>
          <label for="name">Your name</label>
          <input id="name" name="from_name" type="text" placeholder="Jane Doe" required minlength="2" autocomplete="name" />
          <label for="email">Email address</label>
          <input id="email" name="reply_to" type="email" placeholder="you@example.com" required inputmode="email" autocomplete="email" />
          <label for="message">Message</label>
          <textarea id="message" name="message" placeholder="Tell me about your project..." required minlength="10"></textarea>
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:14px">
            <button class="btn magnetic" type="submit" aria-live="polite">Send Message</button>
            <span class="note" id="formHelp">No spam. Your info is kept private.</span>
          </div>
        </form>

        <aside aria-label="Contact details" class="reveal" style="background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:22px">
          <h3 style="margin:0 0 10px;font-family:'Space Grotesk',Inter,sans-serif">Contact</h3>
          <p class="note">Prefer email? Reach me directly.</p>
          <ul style="list-style:none;padding:0;margin:12px 0 0;color:var(--muted)">
            <li><strong>Email:</strong> <a class="mail-link" data-email="ibkkaviyarasi@gmail.com" href="mailto:ibkkaviyarasi@gmail.com">ibkkaviyarasi@gmail.com</a></li>
            <li><strong>LinkedIn:</strong> <a id="openLinkedIn" href="https://www.linkedin.com/in/kaviyarasi-e-67b93a293/" target="_blank" rel="noopener noreferrer">/in/kaviyarasi-e-67b93a293/</a></li>
            <li><strong>Location:</strong> Tamil Nadu, India</li>
          </ul>
        </aside>
      </div>
    </section>
  </main>

  <footer>Â© <span id="year"></span> Kaviyarasi E. Crafted with care.</footer>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <!-- Voice & runtime script (updated to make voice work reliably) -->

  <script>
    (function(){
      // === Small config (change only the email if needed) ===
      const OWNER_EMAIL = 'ibkkaviyarasi@gmail.com'; // used for Gmail compose
      const RESUME_FILE = 'Kaviyarasi_E_ATS.pdf'; // file path to your resume (adjust if needed)

      // Helper: speak text (speechSynthesis)
      function speak(text){
        try{
          window.speechSynthesis.cancel();
          const u = new SpeechSynthesisUtterance(text);
          u.rate = 1.0; u.pitch = 1.0; u.lang = 'en-US';
          window.speechSynthesis.speak(u);
        } catch(e){
          console.warn('speech failed', e);
        }
      }

      // DOM ready
      window.addEventListener('DOMContentLoaded', () => {
        // ---- Init EmailJS (if provided) ----
        if(window.emailjs){
          try{ emailjs.init('d2b4nZpi5Yz5lxH7S'); } catch(e){ console.warn('EmailJS init skipped (no key):', e); }
        }

        // ---- Contact form behavior ----
        const form = document.getElementById('contactForm');
        const alertBox = document.getElementById('formAlert');
        const yearEl = document.getElementById('year');
        if(yearEl) yearEl.textContent = new Date().getFullYear();

        function showAlert(type,msg){
          if(!alertBox) return;
          alertBox.className = 'alert ' + (type==='success' ? 'success' : 'error');
          alertBox.textContent = msg;
          alertBox.style.display = 'block';
        }
        function hideAlert(){ if(alertBox) alertBox.style.display = 'none'; }
        function validEmail(e){ return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(e); }

        if(form){
          form.addEventListener('submit', (ev) => {
            ev.preventDefault();
            hideAlert();
            const name = (form.from_name?.value || '').trim();
            const email = (form.reply_to?.value || '').trim();
            const message = (form.message?.value || '').trim();
            if(!name || !email || !message) return showAlert('error','Please fill out all fields.');
            if(name.length < 2) return showAlert('error','Name should be at least 2 characters.');
            if(!validEmail(email)) return showAlert('error','Please enter a valid email address.');
            if(message.length < 10) return showAlert('error','Message should be at least 10 characters.');

            // If EmailJS configured, use it; otherwise open Gmail compose prefilled
            if(window.emailjs && typeof emailjs.sendForm === 'function'){
              emailjs.sendForm('service_f8uohms','template_n2ioh6i', form)
                .then(()=>{ showAlert('success','Thanks! Your message has been sent.'); form.reset(); })
                .catch((err)=>{ console.error(err); showAlert('error','Failed to send. Opening Gmail compose.'); openGmailCompose(OWNER_EMAIL, `Portfolio message from ${name}`, `From: ${name} <${email}>\n\n${message}`); });
            } else {
              // Fallback to opening Gmail compose with prefilled fields
              openGmailCompose(OWNER_EMAIL, `Portfolio message from ${name}`, `From: ${name} <${email}>\n\n${message}`);
              showAlert('success','Opening Gmail compose with your message...');
              form.reset();
            }
          });
        }

        // ---- Open Gmail compose helper (opens new tab) ----
        function openGmailCompose(to, subject, body){
          const url = `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(to||'')}&su=${encodeURIComponent(subject||'')}&body=${encodeURIComponent(body||'')}`;
          window.open(url, '_blank', 'noopener');
        }

        // Intercept click on mail links to open Gmail compose (nicer UX)
        document.querySelectorAll('.mail-link').forEach(a => {
          a.addEventListener('click', (e) => {
            e.preventDefault();
            const em = a.dataset.email || OWNER_EMAIL;
            openGmailCompose(em, 'Hello from your portfolio', '');
            speak('Opening Gmail compose.');
          });
        });

        // ---- Download CV button (matches your markup earlierâ€”button id downloadCVBtn) ----
        const downloadCVBtn = document.getElementById('downloadCVBtn');
        if(downloadCVBtn){
          downloadCVBtn.addEventListener('click', () => {
            // attempt to download file; if missing, open Gmail Compose as fallback
            const link = document.createElement('a');
            link.href = RESUME_FILE;
            link.download = 'Kaviyarasi_E_CV.pdf';
            document.body.appendChild(link);
            link.click();
            link.remove();
            speak('Downloading your resume.');
          });
        }

        // ---- Typing animation (unchanged logic with tuned speed) ----
        const typingEl = document.querySelector('.typing');
        if(typingEl){
          const roles = ['AI Developer','Full-Stack Engineer','Flutter Enthusiast','Voice Interface Builder'];
          let roleIdx=0, charIdx=0, deleting=false;
          const TYPE_DELAY=70, PAUSE=700, DELETE_DELAY=40;
          (function typeLoop(){
            const current = roles[roleIdx % roles.length];
            if(!deleting){
              charIdx++; typingEl.textContent = current.slice(0,charIdx);
              if(charIdx===current.length){ deleting=true; return setTimeout(typeLoop, PAUSE); }
              setTimeout(typeLoop, TYPE_DELAY);
            } else {
              charIdx--; typingEl.textContent = current.slice(0,charIdx);
              if(charIdx===0){ deleting=false; roleIdx++; return setTimeout(typeLoop, 320); }
              setTimeout(typeLoop, DELETE_DELAY);
            }
          })();
        }

        // ---- Reveal on scroll (cert items) ----
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(entry=>{
            if(entry.isIntersecting){
              entry.target.classList.add('visible');
              io.unobserve(entry.target);
            }
          });
        }, { threshold: 0.18 });
        document.querySelectorAll('.reveal, .cert-item').forEach(el => io.observe(el));

        // ---- Card tilt & spotlight behavior (unchanged) ----
        document.querySelectorAll('.card').forEach(card=>{
          const thumb = card.querySelector('.thumb');
          card.addEventListener('mousemove', (e)=>{
            const r = card.getBoundingClientRect();
            const mx = (e.clientX - r.left)/r.width;
            const my = (e.clientY - r.top)/r.height;
            card.style.setProperty('--mx', (mx*100)+'%');
            card.style.setProperty('--my', (my*100)+'%');
            const rotX = (my - .5) * -8;
            const rotY = (mx - .5) * 8;
            card.style.transform = `translateY(-6px) scale(1.02) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
            if(thumb){ thumb.style.transform = `translateZ(24px)`; }
          });
          card.addEventListener('mouseleave', ()=>{
            card.style.transform='translateY(0) scale(1)';
            if(thumb){ thumb.style.transform='translateZ(0)'; }
          });
        });

        // ---- Magnetic buttons ----
        document.querySelectorAll('.btn.magnetic').forEach(btn=>{
          btn.addEventListener('mousemove', (e)=>{
            const r = btn.getBoundingClientRect();
            btn.style.setProperty('--bx', (e.clientX - r.left) + 'px');
            btn.style.setProperty('--by', (e.clientY - r.top) + 'px');
          });
        });

        // ---- Stars canvas ----
        (function initStars(){
          const cvs = document.getElementById('stars');
          if(!cvs || !cvs.getContext) return;
          const ctx = cvs.getContext('2d');
          let w,h,stars=[];
          function rand(a,b){ return Math.random()*(b-a)+a; }
          function resize(){ w=cvs.width=window.innerWidth; h=cvs.height=window.innerHeight; }
          function init(){ stars = Array.from({length: 140}, ()=>({ x: rand(0,w), y: rand(0,h), z: rand(0.2,1.2), r: rand(0.6,1.8) })); }
          function draw(){
            ctx.clearRect(0,0,w,h);
            stars.forEach(s=>{
              s.x += 0.02 * s.z;
              if(s.x > w + 20) s.x = -20;
              ctx.beginPath();
              ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
              ctx.fillStyle = `rgba(160,200,255,${0.35 * s.z})`;
              ctx.fill();
            });
            requestAnimationFrame(draw);
          }
          function setup(){ resize(); init(); draw(); }
          window.addEventListener('resize', setup, { passive: true });
          setup();
        })();

        // ---- Voice control ----
        const micBtn = document.getElementById('micBtn');
        let recognition = null;
        let listening = false;

        // Initialize SpeechRecognition if available
        function initRecognition(){
          if(recognition) return recognition;
          const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
          if(!SpeechRec){
            micBtn.disabled = true;
            micBtn.textContent = 'Voice not supported';
            speak('Voice recognition is not supported in this browser. Use Chrome or Edge.');
            return null;
          }
          const rec = new SpeechRec();
          rec.lang = 'en-US';
          rec.continuous = false; // single command per activation
          rec.interimResults = false;

          rec.onstart = () => {
            listening = true;
            micBtn.classList.add('listening');
            micBtn.textContent = 'Listening... Say a command';
            speak('Listening. Say a command, for example: show projects, download resume, or email me.');
          };
          rec.onend = () => {
            listening = false;
            micBtn.classList.remove('listening');
            micBtn.textContent = 'Start Listening';
          };
          rec.onerror = (e) => {
            listening = false;
            micBtn.classList.remove('listening');
            micBtn.textContent = 'Start Listening';
            console.error('Speech error', e);
            speak('There was an error with the microphone.');
          };
          rec.onresult = (ev) => {
            const transcript = ev.results[0][0].transcript;
            console.log('Heard:', transcript);
            handleCommand(transcript);
          };
          recognition = rec;
          return rec;
        }

        // Command action map (names kept short)
        const actions = {
          gotoHome(){ document.getElementById('home').scrollIntoView({behavior:'smooth'}); speak('Going to home.'); },
          gotoProjects(){ document.getElementById('projects').scrollIntoView({behavior:'smooth'}); speak('Showing projects.'); },
          gotoCerts(){ document.getElementById('certs').scrollIntoView({behavior:'smooth'}); speak('Opening certifications.'); },
          gotoContact(){ document.getElementById('contact').scrollIntoView({behavior:'smooth'}); speak('Opening contact section.'); },
          downloadResume(){
            // create and click anchor to download
            const a = document.createElement('a');
            a.href = RESUME_FILE || 'Kaviyarasi_E_ATS.pdf';
            a.download = 'Kaviyarasi_E_CV.pdf';
            document.body.appendChild(a);
            a.click();
            a.remove();
            speak('Downloading resume now.');
          },
          openLinkedIn(){
            const link = document.getElementById('openLinkedIn');
            if(link){ window.open(link.href, '_blank', 'noopener'); speak('Opening LinkedIn.'); }
            else speak('LinkedIn link not found.');
          },
          emailMe(){
            // open Gmail compose to Owner
            openGmailCompose(OWNER_EMAIL, 'Hello', '');
          },
          stopListening(){
            if(recognition){ recognition.stop(); }
            listening = false;
            micBtn.classList.remove('listening');
            micBtn.textContent = 'Start Listening';
            speak('Stopped listening.');
          },
          scrollDown(){ window.scrollBy({ top: window.innerHeight * 0.9, behavior: 'smooth' }); speak('Scrolling down.'); },
          scrollUp(){ window.scrollBy({ top: -window.innerHeight * 0.9, behavior: 'smooth' }); speak('Scrolling up.'); }
        };

        // Command parsing (robust & forgiving)
        function handleCommand(rawText){
          const t = (rawText || '').toLowerCase().trim();
          if(!t) { speak("I didn't hear anything."); return; }

          // direct keyword checks
          if(t.includes('home') || /^go to home|go home/.test(t)) return actions.gotoHome();
          if(t.includes('project') || t.includes('projects') || /show projects|open projects/.test(t)) return actions.gotoProjects();
          if(t.includes('certificat') || t.includes('certificate') || t.includes('certs') || /show certifications|open certifications/.test(t)) return actions.gotoCerts();
          if(t.includes('contact') || t.includes('contact me') || /open contact/.test(t)) return actions.gotoContact();
          if(t.includes('resume') || t.includes('cv') || t.includes('download resume') || t.includes('download cv')) return actions.downloadResume();
          if(t.includes('linkedin') || t.includes('open linkedin')) return actions.openLinkedIn();
          if(t.includes('email me') || t.includes('mail me') || t.includes('send email') || t.includes('compose email')) return actions.emailMe();
          if(t.includes('stop listening') || t === 'stop' || t === 'stop listening') return actions.stopListening();
          if(t.includes('scroll down')) return actions.scrollDown();
          if(t.includes('scroll up')) return actions.scrollUp();

          // fallback
          speak("Sorry, I didn't catch that command. Try: show projects, download resume, or email me.");
        }

        // mic button toggle
        if(micBtn){
          micBtn.addEventListener('click', () => {
            if(!recognition) initRecognition();
            if(!recognition) return; // not supported
            if(listening){
              recognition.stop();
            } else {
              try { recognition.start(); } catch(e) { console.warn('rec start error', e); }
            }
          });
        }

        // Also allow keyboard hotkey: press "v" to start/stop listening
        window.addEventListener('keydown', (ev) => {
          if(ev.key === 'v' || ev.key === 'V'){
            if(!recognition) initRecognition();
            if(!recognition) return;
            if(listening) recognition.stop(); else recognition.start();
          }
        });

        // ---- Small dev self-check in console ----
        console.groupCollapsed('Voice-Portfolio Self-check');
        console.log('SpeechSynthesis available:', !!window.speechSynthesis);
        console.log('SpeechRecognition available:', !!(window.SpeechRecognition || window.webkitSpeechRecognition));
        console.log('EmailJS loaded:', !!window.emailjs);
        console.groupEnd();
      });
    })();
    window.addEventListener("DOMContentLoaded", () => {
  // === Voice Command Integration ===
  const micBtn = document.getElementById("micBtn");
    let recognition, listening = false;

    function speak(text){
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "en-US"; u.rate=1; u.pitch=1;
      window.speechSynthesis.speak(u);
    }

    function initRecognition(){
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if(!SR){ micBtn.textContent="âŒ Not Supported"; micBtn.disabled=true; return null; }
      const rec = new SR();
      rec.lang="en-US"; rec.continuous=false; rec.interimResults=false;
      rec.onstart=()=>{listening=true;micBtn.textContent="ðŸŽ™ Listening...";speak("Listening. Say a command.");};
      rec.onend=()=>{listening=false;micBtn.textContent="ðŸŽ¤ Start Listening";};
      rec.onresult=(e)=>{handleCommand(e.results[0][0].transcript.toLowerCase());};
      rec.onerror=(e)=>{console.error("Speech error",e);speak("Error with microphone.");};
      return rec;
    }

    function handleCommand(cmd){
      console.log("Heard:", cmd);
      if(cmd.includes("project")){document.getElementById("projects").scrollIntoView({behavior:"smooth"});speak("Here are my projects.");}
      else if(cmd.includes("cert")){document.getElementById("certs").scrollIntoView({behavior:"smooth"});speak("These are my certifications.");}
      else if(cmd.includes("contact")||cmd.includes("hire")){document.getElementById("contact").scrollIntoView({behavior:"smooth"});speak("Here are my contact details.");}
      else if(cmd.includes("resume")||cmd.includes("cv")){let a=document.createElement("a");a.href="Kaviyarasi_E_ATS.pdf";a.download="Kaviyarasi_E_CV.pdf";document.body.appendChild(a);a.click();a.remove();speak("Downloading your resume.");}
      else if(cmd.includes("email")){window.open("https://mail.google.com/mail/?view=cm&fs=1&to=ibkkaviyarasi@gmail.com","_blank");speak("Opening Gmail to email me.");}
      else if(cmd.includes("linkedin")){window.open("https://www.linkedin.com/in/kaviyarasi-e-67b93a293/","_blank");speak("Opening my LinkedIn profile.");}
      else if(cmd.includes("scroll down")){window.scrollBy({top:window.innerHeight*0.9,behavior:"smooth"});speak("Scrolling down.");}
      else if(cmd.includes("scroll up")){window.scrollBy({top:-window.innerHeight*0.9,behavior:"smooth"});speak("Scrolling up.");}
      else if(cmd.includes("stop")){if(recognition)recognition.stop();speak("Stopped listening.");}
      else{speak("Sorry, I did not understand the command.");}
    }

    micBtn.addEventListener("click",()=>{
      if(!recognition) recognition=initRecognition();
      if(!recognition) return;
      if(!listening) recognition.start(); else recognition.stop();
    });

    document.getElementById("year").textContent=new Date().getFullYear();
  // Toggle recognition when clicking mic button
  micBtn.addEventListener("click", () => {
    if (!recognition) recognition = initRecognition();
    if (!recognition) return;

    if (!listening) {
      recognition.start();
    } else {
      recognition.stop();
    }
  });
});
window.addEventListener("DOMContentLoaded", () => {
  const micBtn = document.getElementById("micBtn");
  let recognition;
  let listening = false;

  // === Text-to-Speech (response back) ===
  function speak(text) {
    if (!("speechSynthesis" in window)) return;
    window.speechSynthesis.cancel(); // clear queue
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = "en-US";
    msg.rate = 1;
    msg.pitch = 1;
    window.speechSynthesis.speak(msg);
  }
  // === Command Router ===
  function handleCommand(cmd) {
    if (cmd.includes("project")) {
      document.getElementById("projects").scrollIntoView({ behavior: "smooth" });
      speak("Here are my projects.");
    } else if (cmd.includes("certification") || cmd.includes("certificate")) {
      document.getElementById("certs").scrollIntoView({ behavior: "smooth" });
      speak("These are my certifications.");
    } else if (cmd.includes("contact") || cmd.includes("hire")) {
      document.getElementById("contact").scrollIntoView({ behavior: "smooth" });
      speak("Here are my contact details.");
    } else if (cmd.includes("resume") || cmd.includes("cv")) {
      const link = document.createElement("a");
      link.href = "Kaviyarasi_E_ATS.pdf"; // your resume
      link.download = "Kaviyarasi_E_CV.pdf";
      document.body.appendChild(link);
      link.click();
      link.remove();
      speak("Downloading your resume.");
    } else if (cmd.includes("email")) {
      window.open(
        "https://mail.google.com/mail/?view=cm&fs=1&to=ibkkaviyarasi@gmail.com",
        "_blank"
      );
      speak("Opening Gmail to send me an email.");
    } else if (cmd.includes("linkedin")) {
      window.open(
        "https://www.linkedin.com/in/kaviyarasi-e-67b93a293/",
        "_blank"
      );
      speak("Opening my LinkedIn profile.");
    } else if (cmd.includes("stop")) {
      if (recognition) recognition.stop();
      speak("Stopped listening.");
    } else {
      speak("Sorry, I did not understand the command.");
    }
  }

  // === Toggle mic button ===
  micBtn.addEventListener("click", () => {
    if (!recognition) recognition = initRecognition();
    if (!recognition) return;

    if (!listening) {
      recognition.start();
    } else {
      recognition.stop();
    }
  });
});




  </script>
</body>
</html>


